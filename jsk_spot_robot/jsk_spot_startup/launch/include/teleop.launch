<launch>
  <arg name="pad_type" default="dualshock3" />

  <arg name="joy_dev" default="/dev/input/js_$(arg pad_type)" />
  <arg name="joy_topic" default="/joy_$(arg pad_type)" />
  <arg name="cmd_vel_topic" default="bluetooth_teleop/cmd_vel" />

  <node
      pkg="joy"
      type="joy_node"
      name="joy_node_$(arg pad_type)"
      >
    <remap from="joy" to="$(arg joy_topic)" />

    <rosparam subst_value="True">
        dev: $(arg joy_dev)
        deadzone: 0.5
        autorepeat_rate: 20
    </rosparam>
  </node>

  <node
      pkg="teleop_twist_joy"
      type="teleop_node"
      name="teleop_twist_joy_$(arg pad_type)"
      >
    <remap from="joy" to="$(arg joy_topic)" />
    <remap from="cmd_vel" to="$(arg cmd_vel_topic)" />

    <rosparam
        command="load"
        file="$(find jsk_spot_startup)/config/$(arg pad_type)_teleop_twist_joy.yaml"
        />
  </node>

  <include file="$(find jsk_robot_startup)/launch/quadruped_joystick_teleop.launch" >
  <node
      pkg="jsk_robot_startup"
      type="quadruped_joystick_teleop"
      name="joystick_teleop_$(arg pad_type)"
      ns="spot"
      output="screen"
      >
      <remap from="joy" to="$(arg joy_topic)" />

      <rosparam
          command="load"
          file="$(find jsk_spot_startup)/config/$(arg pad_type)_joystick_teleop.yaml"
          />
      <rosparam subst_value="True">
        dock_id: 521
      </rosparam>
  </node>

  <include file="$(find jsk_robot_startup)/launch/head_teleop.launch">
    <arg name="$(arg launch_joy_node)" value="false" />
    <arg name="joy_topic_raw" default="$(arg joy_topic)" />
    <arg name="joy_name_space" default="/go1/" />
    <arg name="launch_joy_node" default="false" />
    <arg name="teleop_twist_joy_param_file" default="$(find jsk_unitree_startup)/config/lead_teleop_twist_joy.yaml" />
    <arg name="joystick_teleop_param_file" default="$(find jsk_unitree_startup)/config/lead_joystick_teleop.yaml" />
  </include>
</launch>
